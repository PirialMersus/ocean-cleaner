import{G as P,W as S,A as x,S as L,P as C,a as R,b as T,T as k,R as A,V as h,c as W,d as z,O as E,M as y}from"./vendor.879881de.js";const G=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&c(n)}).observe(document,{childList:!0,subtree:!0});function d(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerpolicy&&(i.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?i.credentials="include":t.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function c(t){if(t.ep)return;t.ep=!0;const i=d(t);fetch(t.href,i)}};G();let f,s,r,l,u,p;const v=new P;function g(o,e){return Math.random()*(e-o)+o}class O{constructor(){v.load("assets/boat/scene.gltf",e=>{s.add(e.scene),e.scene.scale.set(3,3,3),e.scene.position.set(5,13.05,50),e.scene.rotation.y=1.5,this.boat=e.scene,this.speed={vel:0,rot:0}})}stop(){this.speed.vel=0,this.speed.rot=0}update(){if(this.boat){const e=performance.now()*.001;this.boat.rotation.y+=this.speed.rot,this.boat.translateX(this.speed.vel),this.boat.translateY(Math.sin(e)*.005)}}}async function D(o){return new Promise((e,d)=>{v.load(o,c=>{e(c.scene)})})}let w=null;async function H(){return w||(w=await D("assets/trash/scene.gltf")),new F(w.clone())}const a=new O;class F{constructor(e){s.add(e),e.scale.set(1.5,1.5,1.5),e.position.set(g(-150,150),-.5,g(-150,150)),this.trash=e}}let b=[];const N=50;U();M();async function U(){r=new S,r.setPixelRatio(window.devicePixelRatio),r.setSize(window.innerWidth,window.innerHeight),r.toneMapping=x,document.body.appendChild(r.domElement),s=new L,f=new C(55,window.innerWidth/window.innerHeight,1,2e4),f.position.set(30,30,100),p=new h;const o=new R(1e4,1e4);u=new T(o,{textureWidth:512,textureHeight:512,waterNormals:new k().load("assets/waternormals.jpg",function(n){n.wrapS=n.wrapT=A}),sunDirection:new h,sunColor:16777215,waterColor:7695,distortionScale:3.7,fog:s.fog!==void 0}),u.rotation.x=-Math.PI/2,s.add(u);const e=new W;e.scale.setScalar(1e4),s.add(e);const d=e.material.uniforms;d.turbidity.value=10,d.rayleigh.value=2,d.mieCoefficient.value=.005,d.mieDirectionalG.value=.8;const c={elevation:2,azimuth:180},t=new z(r);function i(){const n=y.degToRad(90-c.elevation),m=y.degToRad(c.azimuth);p.setFromSphericalCoords(1,n,m),e.material.uniforms.sunPosition.value.copy(p),u.material.uniforms.sunDirection.value.copy(p).normalize(),s.environment=t.fromScene(e).texture}i(),l=new E(f,r.domElement),l.maxPolarAngle=Math.PI*.495,l.target.set(0,10,0),l.minDistance=40,l.maxDistance=200,l.update(),u.material.uniforms;for(let n=0;n<N;n++){const m=await H();b.push(m)}window.addEventListener("resize",I),window.addEventListener("keydown",n=>{n.key==="ArrowUp"&&(a.speed.vel=1),n.key==="ArrowDown"&&(a.speed.vel=-1),n.key==="ArrowRight"&&(a.speed.rot=-.05),n.key==="ArrowLeft"&&(a.speed.rot=.05)}),window.addEventListener("keyup",n=>{a.stop()})}function I(){f.aspect=window.innerWidth/window.innerHeight,f.updateProjectionMatrix(),r.setSize(window.innerWidth,window.innerHeight)}function q(o,e){return Math.abs(o.position.x-e.position.x)<15&&Math.abs(o.position.z-e.position.z)<15}function V(){a.boat&&b.forEach(o=>{o.trash&&q(a.boat,o.trash)&&s.remove(o.trash)})}function M(){requestAnimationFrame(M),j(),a.update(),V()}function j(){u.material.uniforms.time.value+=1/60,r.render(s,f)}
